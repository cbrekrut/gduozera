{% load static %}
<!DOCTYPE html>
<html class="wide wow-animation" lang="en">
  <head>
    <link rel="icon" href="{% static 'images/logo.png'%}">
    <title>Услуги</title>
    <meta name="format-detection" content="telephone=yes">
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta charset="utf-8">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <!-- Stylesheets-->
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Montserrat:400,500,600,700%7CPoppins:400%7CTeko:300,400">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/fonts.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
  </head>
  <body>
    <div class="preloader">
      <div class="preloader-body">
        <div class="cssload-container">
          <div class="cssload-speeding-wheel"></div>
        </div>
        <p>Ищем лучшие предложения...</p>
      </div>
    </div>
    <div class="page">
      <!-- Page Header-->
      <header class="section page-header">
        <!-- RD Navbar-->
        <div class="rd-navbar-wrap">
          <nav class="rd-navbar rd-navbar-corporate" data-layout="rd-navbar-fixed" data-sm-layout="rd-navbar-fixed" data-md-layout="rd-navbar-fixed" data-md-device-layout="rd-navbar-fixed" data-lg-layout="rd-navbar-static" data-lg-device-layout="rd-navbar-fixed" data-xl-layout="rd-navbar-static" data-xl-device-layout="rd-navbar-static" data-xxl-layout="rd-navbar-static" data-xxl-device-layout="rd-navbar-static" data-lg-stick-up-offset="46px" data-xl-stick-up-offset="46px" data-xxl-stick-up-offset="106px" data-lg-stick-up="true" data-xl-stick-up="true" data-xxl-stick-up="true">
            <div class="rd-navbar-collapse-toggle rd-navbar-fixed-element-1" data-rd-navbar-toggle=".rd-navbar-collapse"><span></span></div>
            <div class="rd-navbar-aside-outer">
              <div class="rd-navbar-aside">
                <!-- RD Navbar Panel-->
                <div class="rd-navbar-panel">
                  <!-- RD Navbar Toggle-->
                  <button class="rd-navbar-toggle" data-rd-navbar-toggle=".rd-navbar-nav-wrap"><span></span></button>
                  <!-- RD Navbar Brand-->
                  <div class="rd-navbar-brand">
                    <!--Brand--><a class="brand" href="{% url 'index' %}"><img src="{% static 'images/logo.png'%}" alt="" width="90px" height="18px"/></a>
                  </div>
                </div>
                <div class="rd-navbar-aside-right rd-navbar-collapse">
                  <ul class="rd-navbar-corporate-contacts">
                    <li>
                      <div class="unit unit-spacing-xs">
                        <div class="unit-left"><span class="icon fa fa-clock-o"></span></div>
                        <div class="unit-body">
                          <p>09:00 — 21:00</p>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="unit unit-spacing-xs">
                        <div class="unit-left"><span class="icon fa fa-phone"></span></div>
                        <div class="unit-body"><a class="link-phone" href="tel:89105388744">+7 (910) 538-87-44</a></div>
                      </div>
                    </li>
                    <li>
                      <div class="unit unit-spacing-xs">
                        <div class="unit-left"><span class="icon fa fa-phone"></span></div>
                        <div class="unit-body"><a class="link-phone" href="tel:89157233958">+7 (915) 723-39-58</a></div>
                      </div>
                    </li>
                  </ul><a class="button button-md button-default-outline-2 button-ujarak" data-toggle="modal" data-target="#myModal" href="#">Связаться с нами</a>
                </div>
              </div>
            </div>
            <div class="rd-navbar-main-outer">
              <div class="rd-navbar-main">
                <div class="rd-navbar-nav-wrap">
                  <ul class="list-inline list-inline-md rd-navbar-corporate-list-social">
                    <li><a class="icon fa fa-vk" href="https://vk.com/gduozera" target="_blank"></a></li>
                    <li><a class="icon fa fa-whatsapp" href="https://api.whatsapp.com/send/?phone=79105388744&text&type=phone_number&app_absent=0"></a></li>
                  </ul>
                  <!-- RD Navbar Nav-->
                  <ul class="rd-navbar-nav">
                    <li class="rd-nav-item"><a class="rd-nav-link" href="{% url 'index' %}">Главная</a>
                    </li>
                    <li class="rd-nav-item"><a class="rd-nav-link" href="{% url 'about' %}">О нас</a>
                    </li>
                    <li class="rd-nav-item"><a class="rd-nav-link" href="{% url 'places' %}">Размещение</a>
                    </li>
                    <li class="rd-nav-item active"><a class="rd-nav-link" href="{% url 'services' %}">Услуги</a>
                    </li>
                    <li class="rd-nav-item"><a class="rd-nav-link" href="{% url 'contacts' %}">Контакты</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </nav>
        </div>
      </header>
      {% for service in services %}
      <!-- Service-->
      <section class="section section-sm section-first bg-default text-md-left">
        <div class="container mx-5" style="width:auto; max-width:none; padding:0;">
          <div class="row justify-content-center align-items-xl-center">
            <div class="col-md-10 col-lg-5 col-xl-6"><img src="{{ service.main_img.url }}" alt="" width="519" height="564"/>
            </div>
            <div class="col-md-10 col-lg-7 col-xl-6">
              <h1 class="text-spacing-20 font-weight-normal title-opacity-9 mt-3 mt-md-0">{{ service.name }}</h1>
              <!-- Bootstrap tabs-->
              <div class="tabs-custom tabs-horizontal tabs-line" id="tabs-4">
                <!-- Nav tabs-->
                <ul class="nav nav-tabs d-flex justify-content-start">
                  <li class="nav-item mr-5" role="presentation"><a class="nav-link active" href="#tabs-4-1" data-toggle="tab">Описание и стоимость</a></li>
                </ul>
                <!-- Tab panes-->
                <div class="tab-content">
                  <div class="tab-pane fade show active" id="tabs-4-1">
                    <p>{{ service.description|linebreaks }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Camin house galery-->
      <section class="section section-sm section-top-0 section-fluid section-relative bg-gray-4">
        <div class="container-fluid">
          <h6 class="gallery-title display-1 mt-3">Галерея</h6>
          <!-- Owl Carousel-->
          <div class="owl-carousel owl-classic owl-dots-secondary" data-items="1" data-sm-items="2" data-md-items="3" data-lg-items="4" data-xl-items="5" data-xxl-items="6" data-stage-padding="15" data-xxl-stage-padding="0" data-margin="30" data-autoplay="true" data-nav="true" data-dots="true">
            <!-- Thumbnail Classic-->
            {% for photo in service.images.all %}
            <article class="thumbnail thumbnail-mary">
                <div class="thumbnail-mary-figure"><img src="{{ photo.image.url }}" alt="" width="270" height="195"/>
                </div>
                <div class="thumbnail-mary-caption"><a class="icon fl-bigmug-line-zoom60" href="{{ photo.image.url }}" data-lightgallery="item"><img src="{{ photo.image.url }}" alt="" width="270" height="195"/></a>
                </div>
            </article>
            {% endfor %}
          </div>
        </div>
      </section>
      {% endfor %}
      <div class="container social-1">
        <div class="row">
          <div class="col" onclick="window.location.href='https://vk.com/gduozera';" style="cursor: pointer;"><i class="icon fa fa-vk"></i></div>
        </div>
      </div>
      <div class="container social-2">
        <div class="row">
          <div class="col" onclick="window.location.href='https://api.whatsapp.com/send/?phone=79105388744&text&type=phone_number&app_absent=0';" style="cursor: pointer;"><i class="fa-brands fa fa-whatsapp"></i></div>
        </div>
      </div>
      <!-- Page Footer-->
      <footer class="section footer-corporate context-dark">
        <div class="footer-corporate-inset">
          <div class="container">
            <div class="row row-40 justify-content-center">
              <div class="col-sm-12 col-md-6">
                <div class="oh-desktop">
                  <div class="wow slideInRight" data-wow-delay="0s">
                    <h6 class="text-spacing-100 text-uppercase">Контакты</h6>
                    <ul class="footer-contacts d-inline-block d-sm-block">
                      <li>
                        <div class="unit">
                          <div class="unit-left"><span class="icon fa fa-phone"></span></div>
                          <div class="unit-body"><a class="link-phone" href="tel:89105388744">+7 (910) 538-87-44</a></div>
                        <div class="unit-body"><a class="link-phone" href="tel:89157233958">+7 (915) 723-39-58</a></div>
                        </div>
                      </li>
                      <li>
                        <div class="unit">
                          <div class="unit-left"><span class="icon fa fa-phone"></span></div>
                          <div class="unit-body"><a class="link-phone" href="tel:#">+7 (915) 723-39-58</a></div>
                        </div>
                      </li>
                      <li>
                        <div class="unit">
                          <div class="unit-left"><span class="icon fa fa-location-arrow"></span></div>
                          <div class="unit-body"><a class="link-location" href="#">д.Нижние Котицы, Осташковского района, Тверской области. Расстояние от МКАД - 340 км, или 4,5 часа на автомобиле.</a></div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-sm-12 col-md-6">
                <div class="oh-desktop">
                  <div class="wow slideInLeft" data-wow-delay="0s">
                    <h6 class="text-spacing-100 text-uppercase">Навигация</h6>
                    <ul class="row-6 list-0 list-marked list-marked-md list-marked-secondary list-custom-2">
                      <li><a href="{% url 'index'%}">Главная</a></li>
                      <li><a href="{% url 'about'%}">О нас</a></li>
                      <li><a href="{% url 'contacts'%}">Контакты</a></li>
                      <li><a href="{% url 'places'%}">Размещение</a></li>
                    </ul>
                    <div class="group-md group-middle justify-content-sm-start"><a class="button button-lg button-primary button-ujarak"  data-toggle="modal" data-target="#myModal" href="#">Оставить заявку</a></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="footer-corporate-bottom-panel">
          <div class="container">
            <div class="row justfy-content-xl-space-berween row-10 align-items-md-center2">
              <div class="col-sm-6 col-md-4 text-sm-right text-md-center">
                <div>
                  <ul class="list-inline list-inline-sm footer-social-list-2">
                    <li><a class="icon fa fa-vk" href="https://vk.com/gduozera" target="_blank"></a></li>
                    <li><a class="icon fa fa-whatsapp" href="https://api.whatsapp.com/send/?phone=79105388744&text&type=phone_number&app_absent=0"></a></li>
                  </ul>
                </div>
              </div>
              <div class="col-sm-6 col-md-4 order-sm-first">
                <!-- Rights-->
                <p class="rights"><span>&copy;&nbsp;</span><span class="copyright-year"></span><span>&nbsp;</span><span>Домик у Озера</span>. Все права защищены. Design by <a href="https://nes-agency.ru/" target="_blank">nes-agency</a></p>
              </div>
              <div class="col-sm-6 col-md-4 text-md-right">
                <p class="rights"><a href="#">Политика конфиденциальности</a></p>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <!-- Global Mailform Output-->
    <div class="snackbars" id="form-output-global"></div>
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="myModalLabel">Забронировать дом</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Закрыть">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form action="" method="post" id="form">
              {% csrf_token %}
              <div class="form-group">
                <input id="name" aria-label="name" type="text" name="name" placeholder="Ваше имя" class="form-control">
                <div class="error text-start fs-6 fw-light"></div>
              </div>
              <div class="form-group">
                <input id="email" aria-label="email" type="text" name="email" placeholder="Ваш E-mail" class="form-control">
                <div class="error text-start fs-6 fw-light"></div>
              </div>
              <div class="form-group">
                <input id="telephone" aria-label="telephone" type="text" name="telephone" placeholder="Телефон" class="form-control">
                <div class="error text-start fs-6 fw-light"></div>
              </div>
              <div class="form-group">
                <input id="date" aria-label="date" type="text" name="date" placeholder="Даты поездки" class="form-control">
                <div class="error text-start fs-6 fw-light"></div>
              </div>
              <div class="form-group">
                <input id="home" aria-label="home" type="text" name="home" placeholder="Какой дом?" class="form-control">
                <div class="error text-start fs-6 fw-light"></div>
              </div>
              <div class="form-group">
                <input type="submit" value="Оставить заявку" class="btn btn-primary py-3 px-5">
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Javascript-->
    <script src="{% static 'js/core.min.js' %}"></script>
    <script src="{% static 'js/script.js' %}"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    const form = document.getElementById('form');
    const name = document.getElementById('name');
    const email = document.getElementById('email');
    const telephone = document.getElementById('telephone');
    const date = document.getElementById('date');
    const home = document.getElementById('home');
    
    const setError = (element, message) => {
        const inputControl = element.parentElement;
        const errorDisplay = inputControl.querySelector('.error');

        errorDisplay.innerText = message;
        inputControl.classList.add('error');
        inputControl.classList.remove('success')
    };

    const setSuccess = element => {
        const inputControl = element.parentElement;
        const errorDisplay = inputControl.querySelector('.error');

        errorDisplay.innerText = '';
        inputControl.classList.add('success');
        inputControl.classList.remove('error');
    };

    const isValidEmail = email => {
        const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
    }

    const isValidTelephone = telephone => {
        const re = /^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/;
        return re.test(String(telephone).toLowerCase());
    }

    const validateInputs = () => {
        const nameValue = name.value.trim();
        const emailValue = email.value.trim();
        const telephoneValue = telephone.value.trim();
        const dateValue = date.value.trim();
        const homeValue = home.value.trim();
        
        let flag = true;

        if (nameValue == '' || nameValue == null) {
            setError(name, 'Имя не может быть пустым');
            flag = flag && false;
        } else {
            setSuccess(name)
            flag = flag && true;
        }
        if (dateValue == '' || dateValue == null) {
            setError(date, 'Даты не могут быть пустыми');
            flag = flag && false;
        } else {
            setSuccess(date)
            flag = flag && true;
        }
        if (homeValue == '' || homeValue == null) {
            setError(home, 'Выберите дом');
            flag = flag && false;
        } else {
            setSuccess(home)
            flag = flag && true;
        }

        if (emailValue == '' || emailValue == null) {
            setError(email, 'Email не может быть пустым');
            flag = flag && false;
        } else if (!isValidEmail(emailValue)) {
            setError(email, 'Некорректный email адрес');
            flag = flag && false;
        } else {
            setSuccess(email);
            flag = flag && true;
        }

        if (telephoneValue == '' || telephoneValue == null) {
            setError(telephone, 'Номер телефона не может быть пустым');
            flag = flag && false;
        } else if (!isValidTelephone(telephoneValue)) {
            setError(telephone,' Некорректный номер телефона');
            flag = flag && false;
        } else {
            setSuccess(telephone);
            flag = flag && true;
        }
        return flag;

        


    };

    form.addEventListener('submit', e => {
        if (!validateInputs()){
            e.preventDefault();
        }
    });
</script>
  </body>
</html>